{% set showExternalNav = true %}
{% set activeNavItem = 'applications' %}
{% set navArea = 'personal' %}
{% set applicationsLink = '#' %}
{% set homeLink = '#' %}
{% set reviewsLink = '#' %}
{% set userName = 'Dr. Jonathan Doe' %}
{% set hideAccountLinks = true %}
{% extends 'layouts/bulma-ufs.layout.njk' %}

{% set orgs2SessionData = orgs2SessionData if orgs2SessionData %}

{% if orgs2SessionData.roles  %}
    {% set captionTitle = 'New ' + orgs2SessionData.roles %}
{% else %}
    {% set captionTitle = 'New person' %}
{% endif %}

{% set isAdminUser = false %}
{%  set loggedOut = false %}

{% set pageTitle = 'Search results' + GLOBAL_TAG_TITLE_SUFFIX %}
{% set backLinkContents =  [{url:'/prototypes/orgs2/', text:'Back to Application'}] %}

{% set resultArray = resultArray if resultArray %}
{#{% set searchTerm = searchTerm if searchTerm %}#}
{% set searchFail = searchFail if searchFail %}
{% set searchResultsText = searchResultsNumber + ' results' if searchResultsNumber else '' %}

{% if searchTerm  %}
    {% set displayTitle = 'Search results for \'' + searchTerm + '\'' %}
{% else %}
    {% set displayTitle = 'Search results' %}
{% endif %}

{% block content %}

    {% call components.bulmaRow() %}
        {% call components.bulmaColumnAny(size='is-two-thirds') %}
            {{ components.captionHeading(text=displayTitle, caption=captionTitle) }}
        {%- endcall %}
    {%- endcall %}
    {% call components.form(action='#', method='POST',name='submitForm') %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='column is-half', customID='mainContent') %}

                <p class="govuk-body">If you can't find a match, <a href="/prototypes/orgs2/add-manually">enter organisation details manually</a>. </p>

            {%- endcall %}
        {%- endcall %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='column is-9', customID='mainContent') %}

                {% if searchFail %}

                    <p class="govuk-body">There are no organisations matching your search term.</p>

                {% else %}

                    <table class="govuk-table">

                        <thead class="govuk-table__header">

                            <tr>
                                <th class="govuk-table__header">{{ searchResultsText }}{#Organisation name#}</th>
                                <th class="govuk-table__header--numeric"><span class="govuk-visually-hidden">Add organisation</span></th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for item in resultArray %}
                            <tr class="">
                                <td class="govuk-table__cell">{{ item }}</td>
                                <td class="govuk-table__cell govuk-table__cell--numeric"><button type="submit" class="govuk-button govuk-button--link" name="organisation" value="{{ item }}">Select organisation</button> </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>

                {% endif %}
            {%- endcall %}
        {%- endcall %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='column is-half', customID='mainContent') %}

              <p class="govuk-body"><a href="/prototypes/orgs2/organisation-search" class="govuk-link">Try and search again</a> </p>

            {%- endcall %}
        {%- endcall %}

    {%- endcall %}

    {% include '../../layouts/partials/user-contact.njk' %}

{% endblock %}
{% block bodyScripts %}
    <script>
    </script>
{% endblock %}

