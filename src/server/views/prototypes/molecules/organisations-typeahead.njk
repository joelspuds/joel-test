{% extends 'layouts/bulma-ufs.layout.njk' %}
{% set navType = 'admin' %}
{% set isAdminUser = true %}
{%  set loggedOut = false %}
{% set backLinkContents =  [{url:'/prototypes/molecules', text:'Back to molecules'}] %}

{% set newHeader = true %}

{% set motherLoad = motherLoad if motherLoad %}

{% set pageTitle = 'Search organisations' + GLOBAL_TAG_TITLE_SUFFIX %}

{% block content %}

    {% call components.bulmaRow() %}
        {% call components.bulmaColumnAny(size='is-two-thirds u-space-t30') %}
            {{ components.captionHeading(text='Search organisations', caption='') }}
        {%- endcall %}
    {%- endcall %}

    {% call components.form(action='#', method='POST',name='motherLoad') %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='column is-half', customID='mainContent') %}

                <p class="govuk-body">Typeahead/autocomplete is loading 55k+ records into the DOM. Good luck.</p>

                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-visually-hidden">Find your organisation</legend>

                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-label--s" for="organisation">Organisation</label>
                        <select name="organisation" class="govuk-select control" id="organisation">
                            <option></option>
                            {% for item in motherLoad %}
                                <option value="{{ item.id }}">{{ item.n }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </fieldset>
            {%- endcall %}
        {%- endcall %}

        {% call components.bulmaRow() %}
            {% call components.bulmaColumnAny(size='is-full') %}
                <div class="application-controls govuk-clearfix">
                    {{ components.button(text='Search', extraClass="application-controls__submit")}}
                </div>
            {%- endcall %}
        {%- endcall %}

    {%- endcall %}

{% endblock %}
{% block bodyScripts %}
    <script type="text/javascript" src="/javascripts/accessible-autocomplete/accessible-autocomplete.min.js"></script>
    <script type="text/javascript">
        var selectEl = document.querySelector('#organisation');
        accessibleAutocomplete.enhanceSelectElement({
            autoselect: true,
            defaultValue: selectEl.options[selectEl.options.selectedIndex].innerHTML,
            minLength: 3,
            selectElement: selectEl
        });
    </script>

{% endblock %}


