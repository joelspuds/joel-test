{% set showExternalNav = true %}
{% set activeNavItem = 'applications' %}
{% set navArea = 'personal' %}
{% set applicationsLink = '/prototypes/external-users/applications' %}
{% set homeLink = '/prototypes/external-users/home' %}
{% set reviewsLink = '/prototypes/external-users/reviews' %}

{% extends 'layouts/bulma-ufs.layout.njk' %}

{% set isAdminUser = false %}
{%  set loggedOut = false %}

{% set pageTitle = 'Search results' + GLOBAL_TAG_TITLE_SUFFIX %}
{% set backLinkContents =  [{url:'/prototypes/orgs/', text:'Back to Application'}] %}

{% set resultArray = resultArray if resultArray %}
{% set searchTerm = searchTerm if searchTerm %}
{% set searchFail = searchFail if searchFail %}

{% block content %}

    {% call components.bulmaRow() %}
        {% call components.bulmaColumnAny(size='is-two-thirds') %}
            {{ components.captionHeading(text='Search results', caption='Add an applicant') }}
        {%- endcall %}
    {%- endcall %}
    {% call components.form(action='#', method='POST',name='submitForm') %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='column is-half', customID='mainContent') %}

                <p class="govuk-body">If you can't find a match, <a href="/prototypes/orgs/add-manually">enter organisation details manually</a>. </p>

            {%- endcall %}
        {%- endcall %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='column is-half', customID='mainContent') %}

                {% if searchFail %}

                    <p class="govuk-body">There are no organisations matching your search term.</p>
                    {#<p class="govuk-body">You can <a href="#">add a new record</a>.</p>#}

                {% else %}
                    <p class="govuk-body">You searched  for "<strong>{{ searchTerm }}</strong>"</p>

                    <p class="govuk-body">Add the appropriate organisation from the search results.</p>

                    <table class="govuk-table">

                        <thead class="govuk-table__header">
                        <th class="govuk-table__header">Organisation name</th>
                        <th class="govuk-table__header--numeric"><span class="govuk-visually-hidden">Add organisation</span></th>
                        </thead>
                        <tbody>
                        {% for item in resultArray %}
                            <tr class="">
                                <td class="govuk-table__cell">{{ item }}</td>
                                <td class="govuk-table__cell govuk-table__cell--numeric"><button type="submit" class="govuk-button govuk-button--link" name="organisation" value="{{ item }}" href="#">Add <span class="govuk-visually-hidden">as my organisation</span></button> </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>

                {% endif %}
            {%- endcall %}
        {%- endcall %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='column is-half', customID='mainContent') %}

              <p class="govuk-body"><a href="/prototypes/orgs/organisation-search" class="govuk-link">Try and search again</a> </p>

            {%- endcall %}
        {%- endcall %}

    {%- endcall %}

    {% include '../../layouts/partials/user-contact.njk' %}

{% endblock %}
{% block bodyScripts %}
    <script>
    </script>
{% endblock %}

