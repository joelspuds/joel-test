{% set showExternalNav = true %}
{% set activeNavItem = 'applications' %}
{% set navArea = 'personal' %}
{% set applicationsLink = '#' %}
{% set homeLink = '#' %}
{% set reviewsLink = '#' %}
{% set accountSettingsLink = '#' %}

{% set hideAccountLinks = true %}

{% extends 'layouts/bulma-ufs.layout.njk' %}
{% set userName = 'Dr. John  Doe' %}
{% set isAdminUser = false %}
{% set loggedOut = false %}

{% set orgs3SessionData = orgs3SessionData if orgs3SessionData %}
{% set userOneV3 = userOneV3 if userOneV3 %}
{% set userTwoV3 = userTwoV3 if userTwoV3 %}
{% set userThreeV3 = userThreeV3 if userThreeV3 %}
{% set userFourV3 = userFourV3 if userFourV3 %}

{% set pageTitle = 'Applicants' + GLOBAL_TAG_TITLE_SUFFIX %}
{% set backLinkContents =  [{url:'/prototypes/orgs3/', text:'Back to application'}] %}

{% block content %}

   {# {% if userOneV3.firstName %}
        {% call components.bulmaRow() %}
            {% call components.bulmaColumnAny(size='is-full', extraClass='u-space-t20') %}
                <div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
                    <div class="govuk-notification-banner__header">
                        <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">Success</h2>
                    </div>
                    <div class="govuk-notification-banner__content">
                        <h3 class="govuk-notification-banner__heading">{{ userOneV3.firstName }} {{ userOneV3.lastName }} has been added to the project.</h3>
                    </div>
                </div>
            {%- endcall %}
        {%- endcall %}
    {% endif %}#}

    {% if userTwoV3.detailsAdded %}
        {% call components.bulmaRow() %}
            {% call components.bulmaColumnAny(size='is-full', extraClass='u-space-t20') %}
                <div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
                    <div class="govuk-notification-banner__header">
                        <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">Success</h2>
                    </div>
                    <div class="govuk-notification-banner__content">
                        <h3 class="govuk-notification-banner__heading">
                            {% if userTwoV3.firstName !== '-' %}
                            {{ userTwoV3.titleName }} {{ userTwoV3.firstName }} {{ userTwoV3.lastName }}
                            {% else %}
                               {{ userTwoV3.roles }}
                            {%  endif %}
                            has been added to the project.</h3>
                    </div>
                </div>
            {%- endcall %}
        {%- endcall %}
    {% endif %}

    {% if userThreeV3.detailsAdded %}
        {% call components.bulmaRow() %}
            {% call components.bulmaColumnAny(size='is-full', extraClass='u-space-t20') %}
                <div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
                    <div class="govuk-notification-banner__header">
                        <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">Success</h2>
                    </div>
                    <div class="govuk-notification-banner__content">
                        <h3 class="govuk-notification-banner__heading">
                            {#{{ userThreeV3.firstName }} {{ userThreeV3.lastName }}#}
                            {% if userThreeV3.firstName !== '-' %}
                                {{ userThreeV3.titleName }} {{ userThreeV3.firstName }} {{ userThreeV3.lastName }}
                            {% else %}
                                {{ userThreeV3.roles }}
                            {%  endif %}
                            has been added to the project.</h3>
                    </div>
                </div>
            {%- endcall %}
        {%- endcall %}
    {% endif %}

    {% if userFourV3.detailsAdded %}
        {% call components.bulmaRow() %}
            {% call components.bulmaColumnAny(size='is-full', extraClass='u-space-t20') %}
                <div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
                    <div class="govuk-notification-banner__header">
                        <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">Success</h2>
                    </div>
                    <div class="govuk-notification-banner__content">
                        <h3 class="govuk-notification-banner__heading">
                            {#{{ userFourV3.firstName }} {{ userFourV3.lastName }}#}
                            {% if userFourV3.firstName !== '-' %}
                                {{ userFourV3.titleName }} {{ userFourV3.firstName }} {{ userFourV3.lastName }}
                            {% else %}
                                {{ userFourV3.roles }}
                            {%  endif %}
                            has been added to the project.
                        </h3>
                    </div>
                </div>
            {%- endcall %}
        {%- endcall %}
    {% endif %}

    {% call components.bulmaRow() %}
        {% call components.bulmaColumnAny(size='is-two-thirds') %}
            {{ components.captionHeading(text='Applicants', caption='APP171: Bio-detoxification of Ricin in castor bean') }}
        {%- endcall %}
    {%- endcall %}

    {% call components.form(action='#', method='POST',name='submitForm') %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='is-9', extraClass='u-space-t20') %}

               {# <p class="govuk-body">Add details of who will be leading, supporting, taking part in or contributing to your proposed project. </p>#}
                <p class="govuk-body">
                    {#Tell us who will be contributing to this application.#}
                    You should only add people who will be contributing to this application.
                </p>


                <p class="govuk-body">
                    <a class="govuk-button govuk-button--secondary" href="/prototypes/orgs3/select-role">Add applicant</a>
                </p>

            {%- endcall %}

        {%- endcall %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='is-full', extraClass='u-space-b45') %}
                <table class="govuk-table">
                    <caption class="govuk-visually-hidden">Applicants</caption>
                    <thead class="govuk-table__head">
                        <tr class="govuk-table__row">
                            <th scope="col" class="govuk-table__header">Name</th>
                            <th scope="col" class="govuk-table__header">Email</th>
                            <th scope="col" class="govuk-table__header">Role</th>
                            <th scope="col" class="govuk-table__header">Organisation</th>
                            <th scope="col" class="govuk-table__header"><span class="govuk-visually-hidden">Action</span></th>
                        </tr>
                    </thead>
                    <tbody class="govuk-table__body">
                        <tr class="govuk-table__row">
                            <td class="govuk-table__cell">Dr. John  Doe</td>
                            <td class="govuk-table__cell">jdoe@cardiffuniversity.ac.uk</td>
                            <td class="govuk-table__cell">Lead applicant</td>
                            <td class="govuk-table__cell">Cardiff University</td>
                            <td class="govuk-table__cell"><a href="#" class="govuk-link">Remove</a></td>
                        </tr>
                    {% if userOneV3.firstName %}
                        <tr class="govuk-table__row">
                            <td class="govuk-table__cell">{{ userOneV3.firstName }} {{ userOneV3.lastName }}</td>
                            <td class="govuk-table__cell">{{ userOneV3.email }}</td>
                            <td class="govuk-table__cell">{{ userOneV3.roles }}</td>
                            <td class="govuk-table__cell">
                                {{ userOneV3.organisation }}
                                {#{% if userOneV3.organisation %}
                                    {{ userOneV3.organisation }}
                                {% else %}
                                    {% if userOneV3.newOrgName %}
                                        {% if userOneV3.organisation %}
                                            <br>
                                        {% endif %}
                                        {{ userOneV3.newOrgName }}
                                    {% endif %}
                                    #}{#{% if userOneV3.countries %}
                                        {% if userOneV3.newOrgName %}
                                            <br>
                                        {% endif %}
                                        {{ userOneV3.countries }}
                                    {% endif %}
                                    {% if userOneV3.newOrgWebsite %}
                                        {% if userOneV3.countries %}
                                            <br>
                                        {% endif %}
                                        <a href="{{ userOneV3.newOrgWebsite }}" class="govuk-link">{{ userOneV3.newOrgWebsite }}</a>
                                    {% endif %}#}{#
                                {% endif %}#}
                            </td>
                            <td class="govuk-table__cell"><a href="#" class="govuk-link">Remove</a></td>
                        </tr>
                    {% endif %}
                    {% if userTwoV3.firstName %}
                        <tr class="govuk-table__row">
                            <td class="govuk-table__cell">{{ userTwoV3.titleName }} {{ userTwoV3.firstName }} {{ userTwoV3.lastName }}</td>
                            <td class="govuk-table__cell">{{ userTwoV3.email }}</td>
                            <td class="govuk-table__cell">
                                {{ userTwoV3.roles }}
                                {% if userTwoV3.otherRole %} - {{ userTwoV3.otherRole }}{% endif %}
                            </td>
                            <td class="govuk-table__cell">
                                {{ userTwoV3.organisation }}
                            </td>
                            <td class="govuk-table__cell"><a href="#" class="govuk-link">Remove</a></td>
                        </tr>
                    {% endif %}
                    {% if userThreeV3.firstName %}
                        <tr class="govuk-table__row">
                            <td class="govuk-table__cell">{{ userThreeV3.titleName }} {{ userThreeV3.firstName }} {{ userThreeV3.lastName }}</td>
                            <td class="govuk-table__cell">{{ userThreeV3.email }}</td>
                            <td class="govuk-table__cell">{{ userThreeV3.roles }} {% if userThreeV3.otherRole %} - {{ userThreeV3.otherRole }}{% endif %}</td>
                            <td class="govuk-table__cell">
                                {{ userThreeV3.organisation }}
                            </td>
                            <td class="govuk-table__cell"><a href="#" class="govuk-link">Remove</a></td>
                        </tr>
                    {% endif %}
                        {% if userFourV3.firstName %}
                            <tr class="govuk-table__row">
                                <td class="govuk-table__cell">{{ userFourV3.titleName }} {{ userFourV3.firstName }} {{ userFourV3.lastName }}</td>
                                <td class="govuk-table__cell">{{ userFourV3.email }}</td>
                                <td class="govuk-table__cell">{{ userFourV3.roles }} {% if userFourV3.otherRole %} - {{ userFourV3.otherRole }}{% endif %}</td>
                                <td class="govuk-table__cell">
                                    {{ userFourV3.organisation }}
                                </td>
                                <td class="govuk-table__cell"><a href="#" class="govuk-link">Remove</a></td>
                            </tr>
                        {% endif %}
                    </tbody>
                </table>

            {%- endcall %}

        {%- endcall %}


        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='column  is-full is-9-desktop is-9-widescreen') %}

                {% call components.formGroup() %}
                    <div class="application-item">
                        <div class="application-item__contents application-item__contents--mac">
                            <fieldset class="govuk-fieldset" aria-describedby="markAsComplete">
                                <legend class="govuk-fieldset__legend govuk-visually-hidden">
                                    <h3 class="govuk-fieldset__heading" id="">Mark as complete</h3>
                                </legend>
                                <div class="govuk-checkboxes">
                                    <div class="govuk-checkboxes__item">
                                        <input class="govuk-checkboxes__input" id="markAsComplete" name="isComplete" type="checkbox" {% if allResourcesValues.isComplete == 'on' %} checked{% endif %}>
                                        <label class="govuk-label govuk-checkboxes__label" for="markAsComplete">Mark as complete</label>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                {%- endcall %}

            {%- endcall %}

        {%- endcall %}


        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='is-7', extraClass='u-space-t20') %}

                <div class="application-controls govuk-clearfix">
                    <button type="submit" class="govuk-button application-controls__submit" name="submitButton">Save and Return</button>
                    <a href="/prototypes/orgs" class="govuk-link application-controls__cancel">Return to application</a>
                </div>

            {%- endcall %}


        {%- endcall %}

    {%- endcall %}
    {% include '../../layouts/partials/user-contact.njk' %}
{% endblock %}
{% block bodyScripts %}
    <script>
        Zepto(function($){
            $(window).on('load', function() {
                console.log('window loaded');
                $('.govuk-tabs__tab').attr('tabindex', '');
            });
        });
    </script>
{% endblock %}

