{% set showExternalNav = true %}
{% set activeNavItem = 'panel' %}
{% set navArea = 'personal' %}
{% set applicationsLink = '#' %}
{% set homeLink = '#' %}
{% set reviewsLink = '#' %}
{% set accountSettingsLink = '' %}
{% set showExternalFurniture = false %}
{% set hideAccountLinks = true %}
{% extends 'layouts/bulma-ufs.layout.njk' %}
{% set isAdminUser = true %}
{% set loggedOut = false %}
{% set navType = 'admin' %}

{% set allData = allData if allData %}
{% set externalAwardPrototypeData = prototypeData if prototypeData %}
{% set userName = externalAwardPrototypeData.userName %}

{% set pageTitle = 'Manage members' + GLOBAL_TAG_TITLE_SUFFIX %}
{% set backLinkContents =  [{url:'/prototypes/manage-panel/panel-dashboard', text:'Back to panel dashboard'}] %}

{% block content %}

    <style>
        .sticky-tabs {
            /*overflow: hidden;*/
        }
        .sticky-tabs--stuck {
            position: fixed;
            top: 0;
            width: 100%;
        }

        .menu {
            width: 100%;
            z-index: 99;
            position: static;
        }

        .menu.sticky {
            position: fixed;
            top: 0;
            /*border-bottom: 0;*/
            width: 100%;
            max-width: 1152px;
            padding-right: 1.5rem;
        }

        .sticky-tabs + .govuk-tabs__panel {
            /*padding-top: 60px;*/
        }
    </style>

    {% call components.bulmaRow() %}
        {% call components.bulmaColumnAny(size='is-two-thirds') %}
            {{ components.captionHeading(text='Manage members', caption=externalAwardPrototypeData.panelName) }}
        {%- endcall %}
    {%- endcall %}

    {% call components.bulmaRow(extraClass='_u-space-b45') %}
        {% call components.bulmaColumnAny(size='is-full') %}
            <div class="big-numbers big-numbers--small-boxed">
                <div class="big-numbers__biggy">
                    <div class="big-numbers__number">
                        1<span class="govuk-!-font-size-16">of</span>11
                    </div>
                    <div class="big-numbers__title">
                        Applications assigned first introducers
                    </div>
                </div>
                <div class="big-numbers__biggy">
                    <div class="big-numbers__number">
                        1<span class="govuk-!-font-size-16">of</span>11
                    </div>
                    <div class="big-numbers__title">
                        Applications assigned second introducers
                    </div>
                </div>
                <div class="big-numbers__biggy">
                    <div class="big-numbers__number">
                        1<span class="govuk-!-font-size-16">of</span>11
                    </div>
                    <div class="big-numbers__title">
                        Applications assigned third introducers
                    </div>
                </div>
                <div class="big-numbers__biggy">
                    <div class="big-numbers__number">
                        1
                    </div>
                    <div class="big-numbers__title">
                        Panelists have Conflicts with applications
                    </div>
                </div>
                <div class="big-numbers__biggy">
                    <div class="big-numbers__number">
                        0<span class="govuk-!-font-size-16">of</span>11
                    </div>
                    <div class="big-numbers__title">
                        Panelists have been notified
                    </div>
                </div>

            </div>
        {%- endcall %}
    {%- endcall %}

    {% call components.bulmaRow() %}

        {% call components.bulmaColumnAny(size='column is-full') %}
            <div class="govuk-tabs" data-module="_govuk-tabs">
                <h2 class="govuk-tabs__title">
                    Contents
                </h2>
                <ul class="govuk-tabs__list sticky-tabs menu" id="stickyBar" style="background-color:white;">
                    <li class="govuk-tabs__list-item ">
                        <a class="govuk-tabs__tab" id="link_one" data-tab="_one" href="/prototypes/manage-panel/manage-roles/manage-conflicts" data-scroll="">
                            Manage conflicts
                        </a>
                    </li>
                    <li class="govuk-tabs__list-item ">
                        <a class="govuk-tabs__tab" id="link_two" data-tab="_two" href="/prototypes/manage-panel/manage-roles/name-the-roles" data-scroll="">
                            Name the roles
                        </a>
                    </li>
                    <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
                        <a class="govuk-tabs__tab" id="link_three" data-tab="_three" href="/prototypes/manage-panel/manage-roles/assign-the-roles" data-scroll="">
                            Assign the roles
                        </a>
                    </li>
                    <li class="govuk-tabs__list-item">
                        <a class="govuk-tabs__tab" id="link_four" data-tab="_four" href="/prototypes/manage-panel/manage-roles/review-panelists" data-scroll="">
                            Review panelists
                        </a>
                    </li>
                </ul>
                {#<div class="tabs-cta print-hide">
                    <a href="/prototypes/peer-review-external/download-files" class="govuk-button govuk-button--secondary">Download review material</a>
                </div>#}

                <div class="govuk-tabs__panel govuk-tabs__panel--borderless" id="one">

                    {% call components.bulmaRow() %}

                        {% call components.bulmaColumnAny(size='is-7', extraClass='{#u-space-t20#}') %}

                            {{ components.captionHeading(text='Assign the roles',tag='h2', size='m', extraClass='_u-space-b5') }}

                        {%- endcall %}

                    {%- endcall %}

                    {% call components.bulmaRow() %}

                        {% call components.bulmaColumnAny(size='is-full', extraClass='{#u-space-t20#}') %}


                            <div class="radio-toggles">

                                <div class="radio-toggles__item govuk-radios columns">
                                    <div class="radio-toggles__radio column is-1">
                                        <div class="govuk-radios__item ">
                                            <input class="govuk-radios__input rolesRadio" id="item1" name="item1" type="radio" value="rolesRadios" data-radio="one">
                                            <label class="govuk-label govuk-radios__label " for="item1">
                                                <span class="govuk-visually-hidden">APP090: Atmospheric fluxes of mineral dust-derived soluble trace elements to the ocean using thorium isotopes (ThorMap)</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="radio-toggles__contents column is-11">

                                        <div class="radio-toggles__inner columns">
                                            <div class="radio-toggles__contents-left column is-9">
                                                <div class="radio-toggles__top">
                                                    <h3 class="govuk-heading-s"><a href="#" class="govuk-link govuk-!-display-inline-block">Atmospheric fluxes of mineral dust-derived soluble trace elements to the ocean using thorium isotopes (ThorMap)</a></h3>
                                                    <p class="govuk-body u-space-b0">
                                                        <strong>Panel reference: </strong>APP090
                                                        <br>
                                                        <strong>Lead organisation: </strong>University of South Wales
                                                    </p>
                                                </div>
                                                <div class="radio-toggles__bottom u-space-t20 govuk-visually-hidden" data-content="one">
                                                    bottom stuff
                                                </div>
                                            </div>
                                            <div class="radio-toggles__contents-right column is-3">
                                                right stuff
                                            </div>
                                        </div>
                                    </div>
                                </div>




                                <div class="radio-toggles__item govuk-radios columns">
                                    <div class="radio-toggles__radio column is-1">
                                        <div class="govuk-radios__item ">
                                            <input class="govuk-radios__input rolesRadio" id="item1" name="item1" type="radio" value="rolesRadios" data-radio="two">
                                            <label class="govuk-label govuk-radios__label " for="item1">
                                                <span class="govuk-visually-hidden">APP123: Feline dimensional transmogrification techniques for the 21st century</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="radio-toggles__contents column is-11">

                                        <div class="radio-toggles__inner columns">
                                            <div class="radio-toggles__contents-left column is-9">
                                                <div class="radio-toggles__top">
                                                    <h3 class="govuk-heading-s">  <a href="#" class="govuk-link govuk-!-display-inline-block">Feline dimensional transmogrification techniques for the 21st century </a></h3>
                                                    <p class="govuk-body u-space-b0">
                                                        <strong>Panel reference: </strong>APP123
                                                        <br>
                                                        <strong>Lead organisation: </strong>Oxford University
                                                    </p>
                                                </div>
                                                <div class="radio-toggles__bottom u-space-t20 govuk-visually-hidden" data-content="two">
                                                    bottom stuff
                                                </div>
                                            </div>
                                            <div class="radio-toggles__contents-right column is-3">
                                                right stuff
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="radio-toggles__item govuk-radios columns">
                                    <div class="radio-toggles__radio column is-1">
                                        <div class="govuk-radios__item ">
                                            <input class="govuk-radios__input rolesRadio" id="item1" name="item1" type="radio" value="rolesRadios" data-radio="three">
                                            <label class="govuk-label govuk-radios__label " for="item1">
                                                <span class="govuk-visually-hidden">APP404: Feline dimensional transmogrification techniques for the 21st century</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="radio-toggles__contents column is-11">

                                        <div class="radio-toggles__inner columns">
                                            <div class="radio-toggles__contents-left column is-9">
                                                <div class="radio-toggles__top">
                                                    <h3 class="govuk-heading-s"><a href="#" class="govuk-link govuk-!-display-inline-block">The scientific realities of generating pseudo-babble nonsense as placeholder text - the impact on creators.</a></h3>
                                                    <p class="govuk-body u-space-b0">
                                                        <strong>Panel reference: </strong>APP999
                                                        <br>
                                                        <strong>Lead organisation: </strong>Fulchester College, The Institute of Studies
                                                    </p>
                                                </div>
                                                <div class="radio-toggles__bottom u-space-t20 govuk-visually-hidden" data-content="three">
                                                    bottom stuff
                                                </div>
                                            </div>
                                            <div class="radio-toggles__contents-right column is-3">
                                                right stuff
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        {%- endcall %}

                    {%- endcall %}

                </div>

            </div>
        {%- endcall %}

    {%- endcall %}
    </section>

    {% include '../../../layouts/partials/user-contact.njk' %}

{% endblock %}
{% block bodyScripts %}
    <script type="text/javascript">
        /* smooth-scroll.js v1.3.1 */
        /*
        n=0,
        r=500,
        i=15,
        */
        (function(e, t) {
            "use strict";
            // n is the offset value to get the title showing below the tabs
            var n = 60,
                r = 250,
                i = 15,
                /*s=document.getElementsByTagName("a"),*/
                s = document.getElementsByClassName('canScroll'),
                o;
            for (var u = 0; u < s.length; u++) {
                o = s[u].attributes.href === t ? null : s[u].attributes.href.nodeValue.toString();
                if (o !== null && o.length > 1 && o.indexOf("#") != -1) {
                    s[u].onclick = function() {
                        var n, s = this.attributes.href.nodeValue.toString(),
                            o = s.substr(0, s.indexOf("#")),
                            u = s.substr(s.indexOf("#") + 1);
                        if (n = document.getElementById(u)) {
                            var l = (r - r % i) / i,
                                c = f(),
                                h = (a(n) - c) / l;
                            if (e.history && typeof e.history.pushState == "function") e.history.pushState({}, t, o + "#" + u);
                            for (var p = 1; p <= l; p++) {
                                (function() {
                                    var t = h * p;
                                    setTimeout(function() {
                                        e.scrollTo(0, t + c)
                                    }, i * p)
                                })()
                            }
                            return false
                        }
                    }
                }
            }
            var a = function(e) {
                var r = n * -1;
                while (e.offsetParent != t && e.offsetParent != null) {
                    r += e.offsetTop + (e.clientTop != null ? e.clientTop : 0);
                    e = e.offsetParent
                }
                return r
            };
            var f = function() {
                return e.pageYOffset !== t ? e.pageYOffset : document.documentElement.scrollTop !== t ? document.documentElement.scrollTop : document.body.scrollTop
            }
        })(window)
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script>
        let div_top = $('.menu').offset().top;
        console.log('div_top = ' + div_top);
        $(window).load(function () {
            console.log($('.menu').offset().top);
        });
        $(window).scroll(function () {
            var window_top = $(window).scrollTop() - 0;
            if (window_top > div_top) {
                if (!$('.menu').is('.sticky')) {
                    $('.menu').addClass('sticky');
                }
            } else {
                $('.menu').removeClass('sticky');
            }
        });

        /* $('.govuk-tabs__tab').each(function(index){
             $(this).on('click', function(e){
                 e.preventDefault();
                 console.log('clicking');
                 // set previous scroll before doing anything
                 $('.govuk-tabs__list-item--selected a').attr('data-scroll', $(document).scrollTop());
                 // hide all tabs
                 $('.govuk-tabs__panel').addClass('govuk-tabs__panel--hidden');
                 $('.govuk-tabs__list-item').removeClass('govuk-tabs__list-item--selected');
                 // activate desired tab
                 $('#' + $(this).data('tab')).removeClass('govuk-tabs__panel--hidden');
                 $(this).parent().addClass('govuk-tabs__list-item--selected');
                 // scroll to active tab
                 $(document).scrollTop(parseInt($(this).attr('data-scroll')));
             });
         });*/
    </script>

    <script>
        $('.rolesRadio').each(function(index){
            $(this).on('change', function(e){
                e.preventDefault();
                console.log('clicking');
                // set previous scroll before doing anything
                let marker = $(this).attr('data-radio');
                // $('.radio-toggles__bottom').addClass('govuk-visually-hidden');
                // $('div').attr('data-content', marker).removeClass('govuk-visually-hidden');

                $('.radio-toggles__bottom').each(function(index){
                    if($(this).attr('data-content') != marker) {
                        $(this).addClass('govuk-visually-hidden');
                    } else {
                        $(this).removeClass('govuk-visually-hidden');
                    }
                });


                console.log(marker);
               /* $('.govuk-tabs__list-item--selected a').attr('data-scroll', $(document).scrollTop());
                // hide all tabs
                $('.govuk-tabs__panel').addClass('govuk-tabs__panel--hidden');
                $('.govuk-tabs__list-item').removeClass('govuk-tabs__list-item--selected');
                // activate desired tab
                $('#' + $(this).data('tab')).removeClass('govuk-tabs__panel--hidden');
                $(this).parent().addClass('govuk-tabs__list-item--selected');
                // scroll to active tab
                $(document).scrollTop(parseInt($(this).attr('data-scroll')));*/
            });
        });

    </script>


{% endblock %}

